# =====================================================
# Environment Configuration
# =====================================================
# This application supports two configuration modes:
# 1. Shared Docker Config: Place variables in ../webroot/docker/.env (recommended for webroot setup)
# 2. Local Config: Copy this file to .env and fill in your values
#
# The app automatically checks for ../webroot/docker/.env first,
# then falls back to local .env if not found.
#
# For webroot setup instructions, see: https://model.earth/webroot/

# =====================================================
# Supabase Configuration
# =====================================================
# Create a Supabase project: https://supabase.com
# Get these from: Project Settings -> API

# Public key (safe for client-side)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Secret key (server-side only)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Database connection for Drizzle ORM
# Format: postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
POSTGRES_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres

# =====================================================
# Application Configuration
# =====================================================
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# =====================================================
# File Upload Configuration
# =====================================================
# Maximum file upload size in bytes (default: 10MB)
NEXT_PUBLIC_MAX_FILE_SIZE=10485760

# Supabase Storage bucket name for chat attachments
NEXT_PUBLIC_STORAGE_BUCKET=chat-attachments

# =====================================================
# GitHub OAuth (Optional)
# =====================================================
# Create OAuth App: https://github.com/settings/developers
# Callback URL: https://[YOUR-PROJECT].supabase.co/auth/v1/callback
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# =====================================================
# API Keys (Stored in Browser localStorage - NOT HERE)
# =====================================================
# Google AI API Key - Get from: https://aistudio.google.com/app/apikey
# GitHub Personal Access Token - Get from: https://github.com/settings/tokens
# 
# These are managed client-side in localStorage, not environment variables

# =====================================================
# Optional RAG / Vector Retrieval Configuration
# =====================================================
# Enables deterministic retrieval in /api/chat and optional retrieveContext tool.
# Keep RAG_ENABLED=true for retrieval; set false to disable.
RAG_ENABLED=true

# Pinecone index used by chat/ingestion/vector_db_sync.py
PINECONE_API_KEY=your-pinecone-api-key
PINECONE_INDEX=repo-chunks

# Optional: index host (if omitted, resolved from Pinecone control API)
# Example: your-index-xxxx.svc.us-east-1-aws.pinecone.io
PINECONE_INDEX_HOST=

# Voyage API key used for query embeddings (voyage-code-3 by default)
VOYAGE_API_KEY=your-voyage-api-key
VOYAGE_EMBEDDING_MODEL=voyage-code-3

# Optional retrieval tuning
RAG_TOP_K=6
RAG_SCORE_THRESHOLD=0.45
RAG_TIMEOUT_MS=8000
RAG_MAX_CONTEXT_CHARS=12000
RAG_PER_SNIPPET_CHARS=1800
RAG_NAMESPACE=

# Optional: set false to hide the dynamic retrieval tool from model toolset
RAG_TOOL_ENABLED=true
